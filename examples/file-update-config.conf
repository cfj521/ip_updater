# 文件更新样本配置文件
# 此配置演示如何更新各种格式的配置文件中的IP地址

check_interval = 300

[ip_detection]
timeout = 30
api_endpoints = [
    "https://api.ipify.org",
    "https://ipv4.icanhazip.com",
    "https://checkip.amazonaws.com"
]
web_endpoints = [
    "https://ifconfig.me/ip",
    "https://ipinfo.io/ip"
]

[retry]
interval = 60
max_retries = -1

[logging]
level = "info"
file_path = "/var/log/ip_updater/ip_updater.log"
max_size = 100
max_age = 30

# JSON文件更新示例
[[file_updater]]
name = "nginx-config"
file_path = "/etc/nginx/config.json"
format = "json"
# JSON路径：更新 server.public_ip 字段
key_path = "server/public_ip"
backup = true

# YAML文件更新示例
[[file_updater]]
name = "docker-compose"
file_path = "/opt/myapp/docker-compose.yml"
format = "yaml"
# YAML路径：更新 services.webapp.environment.EXTERNAL_IP
key_path = "services/webapp/environment/EXTERNAL_IP"
backup = true

# TOML文件更新示例
[[file_updater]]
name = "app-config"
file_path = "/etc/myapp/app.toml"
format = "toml"
# TOML路径：更新 [network] 段下的 external_address
key_path = "network/external_address"
backup = false

# INI文件更新示例
[[file_updater]]
name = "service-config"
file_path = "/etc/myservice/config.ini"
format = "ini"
# INI路径：更新 [server] 段下的 bind_ip
key_path = "server/bind_ip"
backup = true

# 多个文件更新示例
[[file_updater]]
name = "backup-server-config"
file_path = "/etc/backup/server.json"
format = "json"
key_path = "connection/host"
backup = true