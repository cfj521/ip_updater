# 阿里云DNS样本配置文件
# 复制此文件到 /etc/ip_updater/config.conf 并根据需要修改

# IP检测间隔（秒），默认300秒（5分钟）
check_interval = 300

[ip_detection]
# IP检测超时时间（秒）
timeout = 30

# API端点优先使用
api_endpoints = [
    "https://api.ipify.org",
    "https://ipv4.icanhazip.com",
    "https://checkip.amazonaws.com"
]

# Web端点作为备选
web_endpoints = [
    "https://ifconfig.me/ip",
    "https://ipinfo.io/ip"
]

[retry]
# 重试间隔（秒）
interval = 60
# 最大重试次数（-1表示无限重试）
max_retries = -1

[logging]
# 日志级别: debug, info, warn, error
level = "info"
# 日志文件路径
file_path = "/var/log/ip_updater/ip_updater.log"
# 日志文件最大大小（MB）
max_size = 100
# 日志文件最大保存天数
max_age = 30

# 阿里云DNS更新配置
[[dns_updater]]
name = "aliyun-main"
provider = "aliyun"
# 阿里云Access Key ID
access_key = "your_access_key_id"
# 阿里云Access Key Secret
secret_key = "your_access_key_secret"
# 要更新的域名
domain = "example.com"

# 要更新的记录列表
[[dns_updater.record]]
name = "www"          # 子域名
type = "A"            # 记录类型
ttl = 600             # TTL值

[[dns_updater.record]]
name = "@"            # 根域名
type = "A"
ttl = 300

[[dns_updater.record]]
name = "api"          # API子域名
type = "A"
ttl = 600

# 如果需要更新多个域名，可以添加更多dns_updater配置块
# [[dns_updater]]
# name = "aliyun-secondary"
# provider = "aliyun"
# access_key = "another_access_key_id"
# secret_key = "another_access_key_secret"
# domain = "another-example.com"
# [[dns_updater.record]]
# name = "mail"
# type = "A"
# ttl = 3600