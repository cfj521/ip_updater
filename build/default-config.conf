# IP-Updater Configuration File

# Default check interval in seconds (兼容旧版本，建议使用下面的分离配置)
check_interval = 600

# DNS更新检查间隔 (seconds, default: 3600 = 60 minutes)
dns_check_interval = 3600

# 文件更新检查间隔 (seconds, default: 600 = 10 minutes)
file_check_interval = 600

[ip_detection]
# Timeout for IP detection requests in seconds
timeout = 30

# API endpoints for getting public IP (tried first) - 中国大陆可访问服务
api_endpoints = [
    "https://myip.ipip.net",
    "https://ddns.oray.com/checkip",
    "https://ip.3322.net",
    "https://members.3322.org/dyndns/getip"
]

# Web endpoints for getting public IP (fallback) - 中国大陆可访问服务
web_endpoints = [
    "https://ip.cn/api/index?ip&type=0",
    "https://ip4.seeip.org"
]

[retry]
# Retry interval in seconds when update fails
interval = 60
# Maximum retry attempts (-1 for infinite)
max_retries = -1

[logging]
# Log level: debug, info, warn, error
level = "info"
# Log file path
file_path = "/var/log/ip_updater/ip_updater.log"
# Max log file size in MB
max_size = 100
# Max age of log files in days
max_age = 30

# Example DNS updater configurations (uncomment and configure as needed)

# [[dns_updater]]
# name = "aliyun-example"
# provider = "aliyun"
# access_key = "your_access_key_id"        # Will be encrypted
# secret_key = "your_access_key_secret"    # Will be encrypted
# domain = "example.com"
# [[dns_updater.record]]
# name = "www"
# type = "A"
# ttl = 600

# [[dns_updater]]
# name = "tencent-example"
# provider = "tencent"
# access_key = "your_secret_id"            # Will be encrypted
# secret_key = "your_secret_key"           # Will be encrypted
# domain = "example.com"
# [[dns_updater.record]]
# name = "@"
# type = "A"
# ttl = 600

# [[dns_updater]]
# name = "huawei-example"
# provider = "huawei"
# access_key = "your_access_key"           # Will be encrypted
# secret_key = "your_secret_access_key"    # Will be encrypted
# domain = "example.com"
# [[dns_updater.record]]
# name = "subdomain"
# type = "A"
# ttl = 600

# [[dns_updater]]
# name = "cloudflare-example"
# provider = "cloudflare"
# token = "your_api_token"                 # Will be encrypted
# domain = "example.com"
# [[dns_updater.record]]
# name = "api"
# type = "A"
# ttl = 600

# [[dns_updater]]
# name = "godaddy-example"
# provider = "godaddy"
# access_key = "your_api_key"              # Will be encrypted
# secret_key = "your_api_secret"           # Will be encrypted
# domain = "example.com"
# [[dns_updater.record]]
# name = "mail"
# type = "A"
# ttl = 600

# Example file updater configurations

# [[file_updater]]
# name = "json-config-example"
# file_path = "/etc/myapp/config.json"
# format = "json"
# key_path = "server/public_ip"           # JSON path: server.public_ip
# backup = true

# [[file_updater]]
# name = "yaml-config-example"
# file_path = "/etc/myapp/config.yaml"
# format = "yaml"
# key_path = "network/external_ip"        # YAML path: network.external_ip
# backup = true

# [[file_updater]]
# name = "toml-config-example"
# file_path = "/etc/myapp/config.toml"
# format = "toml"
# key_path = "server/bind_ip"             # TOML path: server.bind_ip
# backup = true

# [[file_updater]]
# name = "ini-config-example"
# file_path = "/etc/myapp/config.ini"
# format = "ini"
# key_path = "network/public_ip"          # INI path: [network] public_ip
# backup = true