 # 产品需求文档 (PRD) - IP-Updater服务

  ## 1. 产品概述
  **目标**: 提供自动化动态公网IP更新，为没有固定公网IP的服务器提供服务

  ## 2.开发技术要求
  - 采用GO语言
  - 在linux debian系部署
  - 更新DNS服务商的记录模式的，为阿里云、腾讯云、华为云、CloudFlare、GoDaddy生成样本配置文件
  - 更新指定的配置文件模式的，生成样本配置文件，样本中采用注释模式示例json、yaml、toml、ini对应的键值应该在配置文件中如何书写
  - 代码编写完成后生成编译脚本，你自动编译或我手动编译
  
  ## 3. 核心功能需求

  ### 3.1 运行方式
  - 常驻守护进程方式
  - 可以采用参数指定配置文件路径
  
  ### 3.2 初始化
  - 首次运行程序时提示用户，检测是否已创建了自启动的systemd服务文件，若没有创建则提示是否创建
  
  ### 3.3 IP检测
  - 自动检测公网IP变化。优先使用第三方API获取IP，但也支持web方式获取，默认获取方式书写在默认的配置文件中
  
  ### 3.4 IP更新模式
  - 有两种更新模式：一种是更新DNS服务商的记录（支持多条记录更新），一种是更新指定的配置文件
  - 有失败重试机制，默认1分钟，最大重复次数默认无限
  #### 3.4.1 更新DNS服务商的记录
  - 支持多个DNS提供商，优先支持阿里云，然后是腾讯云、华为云，然后是CloudFlare、GoDaddy
  - 支持更新多个条目
  #### 3.4.2 更新指定配置文件
  - 支持json、yaml、toml、ini格式，由用户配置决定
  - 定位采用目录树格式。例如toml格式 [interface] 下 address键名的键值 10.0.0.0/24 配置文件应写为“interface/address”
  - 在指定位置替换键值为获取到的IP
 
  ### 3.5 配置管理
  - 配置文件采用toml格式
  - 配置文件存放在 /etc/ip_updater/config.conf
  - 支持多目标配置，即多个域名或多个文件
  - 加密存储API密钥（这条是你写的示例，我不知道你如何实现？）
  
  ### 3.6 日志管理
  - 所有操作日志记录


