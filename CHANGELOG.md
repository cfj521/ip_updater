# 更新日志 (CHANGELOG)

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 支持更多DNS提供商
- Web管理界面
- 配置文件热重载

---

## [1.1.1] - 2024-09-15

### 修复
- 修复DNS提供商凭证设置问题，确保API调用时有正确的认证信息
- 修复二进制文件编译错误，现在正确生成Linux ELF可执行文件

### 技术改进
- 在DNS操作前动态设置提供商凭证
- 支持Cloudflare的Token认证方式
- 优化跨平台编译流程

---

## [1.1.0] - 2024-09-15

### 新增功能
- 🎨 **全面日志增强系统**
  - 启用颜色支持：成功(绿色🎉)、错误(红色❌)、警告(黄色⚠️)
  - 详细的DNS查询日志记录
  - 详细的文件更新日志记录
  - 文件输出时自动禁用颜色代码

- 🚀 **启动时立即执行功能**
  - 服务启动后立即执行一次IP检测和更新
  - 不需要等待第一个检查间隔

- 🔧 **配置文件问题修复**
  - 修复安装脚本配置文件创建逻辑
  - 创建标准的default-config.conf默认配置模板
  - 统一所有DNS记录TTL为600秒(10分钟)
  - 同步所有示例配置文件使用中国大陆可访问的IP检测服务

### 改进
- DNS和文件更新的醒目成功日志显示
- 重试操作的警告颜色标识
- 错误日志的突出显示
- 更清晰的中文日志信息

### 配置更新
- 所有示例配置文件更新为最新格式
- 添加`dns_check_interval`和`file_check_interval`配置项
- 更新IP检测端点为中国大陆可访问服务

---

## [1.0.3] - 2024-09-14

### 修复
- 修复关键问题并优化中国大陆使用体验
- 移除第一次运行检测和服务创建功能
- 将IP检测服务更换为中国大陆可访问的端点
- 实现DNS和文件更新的分离计时机制

### 配置变更
- DNS更新默认间隔：60分钟
- 文件更新默认间隔：10分钟
- IP检测端点更新为国内服务

---

## [1.0.2] - 2024-09-14

### 新增功能
- 🔍 **完整实现DNS记录查询与比对功能**
  - 为所有5个DNS提供商(阿里云、腾讯云、华为云、Cloudflare、GoDaddy)实现GetRecord方法
  - 更新前先查询当前记录值进行比对
  - 避免不必要的DNS更新操作

### 技术改进
- 新增DNS接口GetRecord方法
- 实现智能DNS记录比对逻辑
- 优化DNS更新流程

---

## [1.0.1] - 2024-09-14

### 新增功能
- 🎯 **实现PRD第4条功能改进**
  - IP格式检测和CIDR掩码保留功能
  - 文件操作原子写入，优化NFS环境兼容性
  - 更新前值比较，避免不必要的更新操作

### 技术改进
- 新增`processIPWithMask()`方法处理IP格式
- 实现`atomicWrite()`方法确保文件操作安全性
- 添加`GetCurrentValue()`方法支持所有配置文件格式
- 完成跨平台编译配置

### 构建系统
- 创建`build_linux.bat`自动化构建脚本
- 支持Windows到Linux的交叉编译

---

## [1.0.0] - 2024-09-14

### 🎉 初始版本发布

### 核心功能
- **多DNS提供商支持**: 阿里云、腾讯云、华为云、Cloudflare、GoDaddy
- **多格式配置文件更新**: JSON、YAML、TOML、INI
- **智能IP检测**: 多端点轮询，自动故障切换
- **灵活配置系统**: TOML格式配置文件，支持多域名多记录
- **重试机制**: 可配置的重试次数和间隔
- **日志系统**: 分级日志记录，支持文件和控制台输出
- **安全特性**: 敏感信息加密存储
- **系统集成**: systemd服务支持，自动安装脚本

### 部署支持
- Linux系统自动安装脚本
- systemd服务配置
- 完整的示例配置文件
- 详细的部署文档

### 配置示例
- 各DNS提供商的配置示例
- 文件更新配置示例
- 混合模式配置示例

---

## 版本命名规则

- **主版本号(Major)**: 重大架构变更或不兼容的API修改
- **次版本号(Minor)**: 新功能添加，向后兼容
- **修订号(Patch)**: Bug修复和小的改进

## 变更类型

- `新增` - 新功能
- `修复` - Bug修复
- `改进` - 现有功能的改进
- `移除` - 移除的功能
- `安全` - 安全相关的修复
- `废弃` - 即将移除的功能